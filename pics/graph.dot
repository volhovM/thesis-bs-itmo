digraph G {
  node [shape="circle"]; 

  rankdir = LR;
 
  c1 c2 c3 c4;

  s t
  e1[label=<e<SUB>1</SUB>>];
  e2[label=<e<SUB>2</SUB>>];
  e3[label=<e<SUB>3</SUB>>];
  e4[label=<e<SUB>4</SUB>>];
  x1[label=<x<SUB>1</SUB>>];
  x2[label=<x<SUB>2</SUB>>];
  x3[label=<x<SUB>3</SUB>>];
  x4[label=<x<SUB>4</SUB>>];

  subgraph example {
    { rank=same; c1 c2 c3 c4 }
    c1 -> c2;
    c1 -> c3;
    c3 -> c4 -> c3;
  }


  subgraph cluster_s { { s }; style=invis; }
 
  subgraph cluster_0 {
    {rank=same; e1 e2 e3 e4}
    style=invis;
    e1 -> e2 -> e3 -> e4 [weight=100, style=invis];
  }


  subgraph cluster_1 {
    {rank=same; x1 x2 x3 x4}
    style=invis;
    x1 -> x2 -> x3 -> x4 [weight=100, style=invis];
  }

  subgraph cluster_t { { t }; style=invis; }

  s -> e1; s -> e2; s -> e3; s -> e4;
  x1 -> t; x2 -> t; x3 -> t; x4 -> t;

  edge [weight=10000];
  e1 -> x1; e2 -> x2; e3 -> x3; e4 -> x4;
  edge [weight=1];

  e1 -> x2; e1 -> x3[weight=0]; e3 -> x4; e4 -> x3;

  edge [style=invis];

  c1 -> c2 -> c3 -> c4 [weight=10000];
  c1 -> e1; c2 -> e2; c3 -> e3; c4 -> e4; c1 -> s; c2 -> s; c3 -> s; c4 -> s;
}
